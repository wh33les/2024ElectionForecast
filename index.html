<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-100299463-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'UA-100299463-1');
	</script>
	<title>2024 Election Forecast | Ashley K. W. Warren</title>
    <style>
        :link { text-decoration:none; 
	    color:#4d5aa0; } /* for unvisited links */
        :visited { text-decoration:none; color:#644451; } /* for visited links */
        a:hover { text-decoration:underline; color:blue; } /* when mouse is over link */
        div {
			background-color:#b7d1ef;
			color:#19181a;
			padding:2%;
			width:800px;
			margin:auto;
			font-family:Helvetica;
			opacity:0.75;
		}
		body {
			background-color:#354092;
            /*background-image:url('flag.jpg');
            background-size:100%;
            background-position:center;
            /*background-repeat:no-repeat;*/
		}
        hr {border-color:#19181a}
        td {
            padding-top: 0px;
            padding-bottom: 10px;
            padding-left: 0px;
            padding-right: 15px;
            }    
        .ballot {
            height: 250px;
            overflow: hidden;
        }
        .equation {
            /* border: solid; */
            width: 90%;
            overflow: hidden;
        }
        .hidden {
            /*width: 90%;*/
            padding:0;
	        display:none; 
        }
    </style>
    
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<!--Used to recycle code-->
    <script>
        function toggleShowHide(elementId) {
        var element = document.getElementById(elementId);
        if (element.style.display == "block") {
            element.style.display = "none";
        } else {
            element.style.display = "block";
        }
    } /* Toggles hidden text.  Code modified from https://www.toptip.ca/2009/09/showhide-text-on-web-page.html. */
    </script>
    <script>
        $(function(){
	        $('#lastmodified').load('lastmodified.html');
        }); /* Calls the last modified code */
    </script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> <!-- Render math formulas -->
    <base target="_blank"> <!-- Opens links in a new tab by default -->
</head>

<body>
    <div><h1>2024 election forecast</h1>
        <img src='ballot.jpg' class="ballot" width="100%">
        <p><span style="font-size: 18px">This project forecasts, on each day leading up to the 2024 U.S. presidential election, who will win.  Predictions are made using <a href="https://projects.fivethirtyeight.com/polls/data/president_polls.csv">this polling data from 538</a>, along with 538's polling averages for swing states, <a href="https://projects.fivethirtyeight.com/2024-election-forecast/">found on this page</a>.</span></p>
        <p><span style="font-size: 18px">Below you'll find today's forecast compared to the baseline and 538's predictions, followed by previous days' forecasts, followed by information about my methodology.</span></p>
    </div>
    <div><h2>Today's forecast (Sun Nov 3 2024)</h2>
        <table width="100%">
            <tr><td><span style="font-size: 18px"><u>Forecast</u></span></td><td><span style="font-size: 18px"><u>Baseline</u></span></td><td><span style="font-size: 18px"><u>538</u></span></td></tr>
            <tr><td style="color:Red;">Trump: 268 (47.7%) AZ GA NC NV</td>
                <td style="color:Red;"><!--<span style="font-size: 18px"><b>-->Trump: 268 (48.7%) AZ GA NC NV<!--</b></span>--></td>
                <td style="color:Red;"><span style="font-size: 18px"><b>Trump (53.3% chance)</b></span></td>
                </tr>
            <tr><td style="color:Blue;"><span style="font-size: 18px"><b>Harris: 270 (48.3%) MI WI PA</b></span></td>
                <td style="color:Blue;"><span style="font-size: 18px"><b>Harris: 270 (47.3%) MI WI PA</b></span></td>
                <td style="color:Blue;"><!--<span style="font-size: 18px"><b>-->Harris (46.5% chance)<!--</b></span>--></td>
                </tr>
        </table>
        <p>My forecast and the baseline assume both candidates win their "safe" states.  The formatting is:</p> 
        <p style="text-align: center";>Candidate: # of electoral votes (popular vote) swing states won</p>
        <p>538's forecast shows the candidate's % chance of winning the election.</p>
        <p><span style="font-size: 20px"><u>Model</u></span></p>
        <img src='forecast_images/03Nov.png' width="100%">  
        <p>See below for a description of the hyperparameters shown in the lower left-hand corner.</p> 
    </div>
    <div><h2>Previous forecasts</h2>
        <img src='previous_images/03Nov.png' width="100%">
        <p>The annotated percentages are 538's forecast of the likelihoods of each candidate to win, and the stars indicate which candidate 538 is more likely.  You can see the history of 538's predictions graphed on their website.</p>
    </div>
    <div><h2><a href="#" onClick="toggleShowHide('swing'); return false;">Swing state predictions</a></h2>
        <hr>
        <div id="swing" class="hidden">
            <p>As mentioned above, my method assumes each candidate will win their "safe" states, or the non-swing states they are favored to win.  <a href="https://projects.fivethirtyeight.com/2024-election-forecast/">You can find more information about which states each candidate is expected to win at 538.</a></p>
            <p>To predict who would win which swing states I calculated each candidate's percentage of the popular vote, only among those two candidates.  Then I allocated that percentage of electoral votes to each candidate.  I awarded states starting with the states the candidate was leading in by the most, according to 538.  After allocating, once there were not enough votes for the next state, I gave that state to the candidate if their remaining votes were at least half of that state's electoral votes.</p>
            <p>Although this was a very simple algorithm, the results are not likely to differ too much from the actual outcome.  The average sample size of the polls taken is 1600, giving an estimated margin of error of 2.5%.  All of the leads in the swing states are well within this margin of error.</p>
        </div>
    </div>
    <div><h2><a href="#" onClick="toggleShowHide('averages'); return false;">Computing daily polling averages</a></h2>
        <hr>
        <div id="averages" class="hidden">
            <p>In computing the daily averages I did not use all of the data available.  To begin with, I only used polls from after Joe Biden dropped out of the race and only results for Donald Trump and Kamala Harris.  There were a few other restrictions I made in which polls got factored into my daily averages.</p>
            <p>I only used the polls among likely voters.  "Likely" is subjective, and depends on the poll.  However, as <a href="https://www.nytimes.com/2024/09/23/us/elections/registered-voters-vs-likely-voters.html">this article from the New York Times</a> explains, it makes no sense to use polls from all registered or all adults, since the outcome is only going to be determined by those who actually vote.</p>
            <p>As recent history has shown, there is often a discrepancy between who wins the popular vote and who wins the election.  To keep my popular vote predictions consistent with my swing state predictions, I only used national and swing state polls.  I left out all polls from non-swing states.</p>
            <p>Finally, 538 rates all the polls with a "POLLSCORE".  <a href="https://abcnews.go.com/538/538s-pollster-ratings-work/story?id=105398138">You can read about their methodology for determining this metric here.</a>  To summarize, negative POLLSCORES are considered reliable polls, so I only factored in polls whose POLLSCORE was negative.</p>
        </div>
    </div>        
    <div><a href="#" onClick="toggleShowHide('algorithm'); return false;"><h2>Hyperparameters and the prediction algorithm</a></h2>
        <hr>
        <div id="algorithm" class="hidden">
            <p>For a time series with a trend (both candidates seem to be trending up as Election Day approaches), double exponential smoothing appeared to be the most natural choice for forecasting.  Recall, the double exponential smoothing model predicts at time \(t\)
                <div class="equation">
                    \[
                    \hat{y}_t = \begin{cases} s_{t-1} + b_{t-1} & \text{ for } 1 < t\leq n \\
                        s_n + (t-n)b_{n} & \text{ for }  t > n 
                        \end{cases}
                    \]
                </div>
            where \(s_t\) and \(b_t\) are level and slope terms, respectively, given by 
                <div class="equation">
                    \begin{align}
                    s_{t} &= \alpha y_t + (1-\alpha) (s_{t-1} + b_{t-1}), \ s_1 = y_1 \\
                    b_{t} &= \beta (s_t - s_{t-1}) + (1-\beta) b_{t-1}, \ b_1 = y_2 - y_1
                    \end{align}
                </div>
            where \(\alpha\) and \(\beta\) are hyperparameters between \(0\) and \(1\).</p>    
            <p>Originally I didn't think exponential smoothing would be an appropriate election forecast method, since my intuition said new polls shouldn't really rely on polls that far in the past, and exponential smoothing uses all previous observations to make predictions.  On the other hand, I wanted the slope term used in double exponential smoothing that takes trends into account.  So I wanted to use a combination of a weighted rolling average for the past 7 days, with the double exponential smoothing slope term.</p>
            <p>However, when trying to figure out how to modify the model, I realized that the weights already decrease exponentially.  If I make my hyperparameters, \( \alpha\) and \( \beta\) for each candidate, large enough, then I can make sure the model only takes the past week or so's observations into account, while the rest give negligible contributions.  This seemed much simpler.</p>
            <p>I ran a grid search to tune my hyperparameters, optimizing the mean absolute error of the forecast on the test set relative to the mean absolute error of the na&iuml;ve forecast on the training set over an equivalent horizon.  I used all my polling data as training data, with five cross-validation splits and holdout sets of 7 days each.  I did it this way because I thought all the data would be useful in building the model, it didn't make sense to leave out the last few days as test data.  Surprisingly, after running the grid search the hyperparameters all turned out to be small, meaning the better forecasts come from taking all previous data into account!</p>  
        </div>    
    </div>
    <div id="lastmodified"></div>
</body>

</html>